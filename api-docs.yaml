openapi: 3.0.0
paths:
  /api/v1:
    get:
      operationId: AppController_getHello
      parameters: []
      responses:
        '200':
          description: ''
  /api/v1/auth/register:
    post:
      operationId: AuthController_register
      summary: Register a new user
      parameters: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RegisterDto'
      responses:
        '201':
          description: User successfully registered
        '409':
          description: User already exists
      tags: &ref_0
        - auth
  /api/v1/auth/login:
    post:
      operationId: AuthController_login
      summary: Login user
      parameters: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/LoginDto'
      responses:
        '200':
          description: User successfully logged in
        '401':
          description: Invalid credentials
      tags: *ref_0
  /api/v1/auth/refresh:
    post:
      operationId: AuthController_refresh
      summary: Refresh access token
      parameters: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RefreshTokenDto'
      responses:
        '200':
          description: Token successfully refreshed
        '401':
          description: Invalid refresh token
      tags: *ref_0
  /api/v1/auth/test:
    post:
      operationId: AuthController_test
      summary: Test endpoint - requires authentication
      parameters: []
      responses:
        '200':
          description: Authentication successful
      tags: *ref_0
  /api/v1/admin/analytics/overview:
    get:
      operationId: AdminAnalyticsController_getOverview
      summary: Get platform overview analytics (Admin only)
      parameters: []
      responses:
        '200':
          description: Overview analytics retrieved successfully
      tags: &ref_1
        - admin-analytics
      security: &ref_2
        - bearer: []
  /api/v1/admin/analytics/users:
    get:
      operationId: AdminAnalyticsController_getUserAnalytics
      summary: Get user analytics (Admin only)
      parameters: []
      responses:
        '200':
          description: User analytics retrieved successfully
      tags: *ref_1
      security: *ref_2
  /api/v1/admin/analytics/products:
    get:
      operationId: AdminAnalyticsController_getProductAnalytics
      summary: Get product analytics (Admin only)
      parameters: []
      responses:
        '200':
          description: Product analytics retrieved successfully
      tags: *ref_1
      security: *ref_2
  /api/v1/admin/analytics/chats:
    get:
      operationId: AdminAnalyticsController_getChatAnalytics
      summary: Get chat analytics (Admin only)
      parameters: []
      responses:
        '200':
          description: Chat analytics retrieved successfully
      tags: *ref_1
      security: *ref_2
  /api/v1/admin/analytics/engagement:
    get:
      operationId: AdminAnalyticsController_getEngagementAnalytics
      summary: Get engagement analytics (Admin only)
      parameters: []
      responses:
        '200':
          description: Engagement analytics retrieved successfully
      tags: *ref_1
      security: *ref_2
  /api/v1/admin/analytics/reports:
    get:
      operationId: AdminAnalyticsController_getTrustSafetyAnalytics
      summary: Get trust & safety analytics (Admin only)
      parameters: []
      responses:
        '200':
          description: Trust & safety analytics retrieved successfully
      tags: *ref_1
      security: *ref_2
  /api/v1/admin/analytics/system:
    get:
      operationId: AdminAnalyticsController_getSystemAnalytics
      summary: Get system & security analytics (Admin only)
      parameters: []
      responses:
        '200':
          description: System analytics retrieved successfully
      tags: *ref_1
      security: *ref_2
  /api/v1/admin/analytics/test:
    get:
      operationId: AdminAnalyticsController_test
      summary: Test endpoint
      parameters: []
      responses:
        '200':
          description: Test successful
      tags: *ref_1
      security: *ref_2
  /api/v1/users/profile:
    get:
      operationId: UsersController_getProfile
      summary: Get current user profile
      parameters: []
      responses:
        '200':
          description: Profile retrieved successfully
      tags: &ref_3
        - users
      security: &ref_4
        - bearer: []
    put:
      operationId: UsersController_updateProfile
      summary: Update current user profile
      parameters: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateProfileDto'
      responses:
        '200':
          description: Profile updated successfully
      tags: *ref_3
      security: *ref_4
  /api/v1/users/{id}/public:
    get:
      operationId: UsersController_getPublicProfile
      summary: Get public user profile
      parameters:
        - name: id
          required: true
          in: path
          schema:
            type: string
      responses:
        '200':
          description: Public profile retrieved successfully
        '404':
          description: User not found
      tags: *ref_3
      security: *ref_4
  /api/v1/users/test:
    get:
      operationId: UsersController_test
      summary: Test endpoint
      parameters: []
      responses:
        '200':
          description: Test successful
      tags: *ref_3
      security: *ref_4
  /api/v1/users/admin/{id}/block:
    put:
      operationId: UsersController_blockUser
      summary: Block a user (Admin only)
      parameters:
        - name: id
          required: true
          in: path
          schema:
            type: string
      responses:
        '200':
          description: User blocked successfully
      tags: *ref_3
      security: *ref_4
  /api/v1/users/admin/{id}/unblock:
    put:
      operationId: UsersController_unblockUser
      summary: Unblock a user (Admin only)
      parameters:
        - name: id
          required: true
          in: path
          schema:
            type: string
      responses:
        '200':
          description: User unblocked successfully
      tags: *ref_3
      security: *ref_4
  /api/v1/categories:
    get:
      operationId: CategoriesController_findAll
      summary: Get all categories
      parameters: []
      responses:
        '200':
          description: Categories retrieved successfully
      tags: &ref_5
        - categories
    post:
      operationId: CategoriesController_create
      summary: Create a new category (Admin only)
      parameters: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateCategoryDto'
      responses:
        '201':
          description: Category created successfully
        '409':
          description: Category already exists
      tags: *ref_5
      security:
        - bearer: []
  /api/v1/categories/with-subcategories:
    get:
      operationId: CategoriesController_findAllWithSubcategories
      summary: Get all categories with subcategories
      parameters: []
      responses:
        '200':
          description: Categories with subcategories retrieved successfully
      tags: *ref_5
  /api/v1/categories/{id}:
    get:
      operationId: CategoriesController_findById
      summary: Get category by ID
      parameters:
        - name: id
          required: true
          in: path
          schema:
            type: string
      responses:
        '200':
          description: Category retrieved successfully
        '404':
          description: Category not found
      tags: *ref_5
    put:
      operationId: CategoriesController_update
      summary: Update a category (Admin only)
      parameters:
        - name: id
          required: true
          in: path
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateCategoryDto'
      responses:
        '200':
          description: Category updated successfully
        '404':
          description: Category not found
      tags: *ref_5
      security:
        - bearer: []
    delete:
      operationId: CategoriesController_delete
      summary: Delete a category (Admin only)
      parameters:
        - name: id
          required: true
          in: path
          schema:
            type: string
      responses:
        '200':
          description: Category deleted successfully
        '404':
          description: Category not found
      tags: *ref_5
      security:
        - bearer: []
  /api/v1/categories/slug/{slug}:
    get:
      operationId: CategoriesController_findBySlug
      summary: Get category by slug
      parameters:
        - name: slug
          required: true
          in: path
          schema:
            type: string
      responses:
        '200':
          description: Category retrieved successfully
        '404':
          description: Category not found
      tags: *ref_5
  /api/v1/categories/subcategories:
    post:
      operationId: CategoriesController_createSubcategory
      summary: Create a new subcategory (Admin only)
      parameters: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateSubcategoryDto'
      responses:
        '201':
          description: Subcategory created successfully
        '409':
          description: Subcategory already exists
      tags: *ref_5
      security:
        - bearer: []
  /api/v1/categories/subcategories/{id}:
    delete:
      operationId: CategoriesController_deleteSubcategory
      summary: Delete a subcategory (Admin only)
      parameters:
        - name: id
          required: true
          in: path
          schema:
            type: string
      responses:
        '200':
          description: Subcategory deleted successfully
        '404':
          description: Subcategory not found
      tags: *ref_5
      security:
        - bearer: []
  /api/v1/categories/test:
    get:
      operationId: CategoriesController_test
      summary: Test endpoint
      parameters: []
      responses:
        '200':
          description: Test successful
      tags: *ref_5
  /api/v1/products:
    get:
      operationId: ProductsController_findAll
      summary: Get all products with filters
      parameters: []
      responses:
        '200':
          description: Products retrieved successfully
      tags: &ref_6
        - products
    post:
      operationId: ProductsController_create
      summary: Create a new product
      parameters: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateProductDto'
      responses:
        '201':
          description: Product created successfully
        '400':
          description: Invalid input
      tags: *ref_6
      security:
        - bearer: []
  /api/v1/products/{id}:
    get:
      operationId: ProductsController_findById
      summary: Get product by ID
      parameters:
        - name: id
          required: true
          in: path
          schema:
            type: string
      responses:
        '200':
          description: Product retrieved successfully
        '404':
          description: Product not found
      tags: *ref_6
    put:
      operationId: ProductsController_update
      summary: Update a product
      parameters:
        - name: id
          required: true
          in: path
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateProductDto'
      responses:
        '200':
          description: Product updated successfully
        '403':
          description: Forbidden - not the owner
        '404':
          description: Product not found
      tags: *ref_6
      security:
        - bearer: []
    delete:
      operationId: ProductsController_delete
      summary: Delete a product (soft delete)
      parameters:
        - name: id
          required: true
          in: path
          schema:
            type: string
      responses:
        '200':
          description: Product deleted successfully
        '403':
          description: Forbidden - not the owner
        '404':
          description: Product not found
      tags: *ref_6
      security:
        - bearer: []
  /api/v1/products/test:
    get:
      operationId: ProductsController_test
      summary: Test endpoint
      parameters: []
      responses:
        '200':
          description: Test successful
      tags: *ref_6
  /api/v1/favorites:
    get:
      operationId: FavoritesController_getUserFavorites
      summary: Get user favorites
      parameters: []
      responses:
        '200':
          description: Favorites retrieved successfully
      tags: &ref_7
        - favorites
      security: &ref_8
        - bearer: []
    post:
      operationId: FavoritesController_addFavorite
      summary: Add product to favorites
      parameters: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AddFavoriteDto'
      responses:
        '201':
          description: Product added to favorites
        '404':
          description: Product not found
        '409':
          description: Product already in favorites
      tags: *ref_7
      security: *ref_8
  /api/v1/favorites/{productId}:
    delete:
      operationId: FavoritesController_removeFavorite
      summary: Remove product from favorites
      parameters:
        - name: productId
          required: true
          in: path
          schema:
            type: string
      responses:
        '200':
          description: Product removed from favorites
        '404':
          description: Favorite not found
      tags: *ref_7
      security: *ref_8
  /api/v1/favorites/count/{productId}:
    get:
      operationId: FavoritesController_getFavoriteCount
      summary: Get favorite count for a product
      parameters:
        - name: productId
          required: true
          in: path
          schema:
            type: string
      responses:
        '200':
          description: Favorite count retrieved
      tags: *ref_7
      security: *ref_8
  /api/v1/favorites/test:
    get:
      operationId: FavoritesController_test
      summary: Test endpoint
      parameters: []
      responses:
        '200':
          description: Test successful
      tags: *ref_7
      security: *ref_8
  /api/v1/upload/single:
    post:
      operationId: UploadController_uploadSingle
      summary: Upload a single image file
      parameters: []
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                file:
                  type: string
                  format: binary
      responses:
        '201':
          description: File uploaded successfully
        '400':
          description: Invalid file
      tags: &ref_9
        - upload
      security: &ref_10
        - bearer: []
  /api/v1/upload/multiple:
    post:
      operationId: UploadController_uploadMultiple
      summary: Upload multiple image files (max 8)
      parameters: []
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                files:
                  type: array
                  items:
                    type: string
                    format: binary
      responses:
        '201':
          description: Files uploaded successfully
        '400':
          description: Invalid files
      tags: *ref_9
      security: *ref_10
  /api/v1/upload/test:
    post:
      operationId: UploadController_test
      summary: Test endpoint
      parameters: []
      responses:
        '200':
          description: Test successful
      tags: *ref_9
      security: *ref_10
  /api/v1/reservations:
    post:
      operationId: ReservationsController_create
      summary: Create a new reservation
      parameters: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateReservationDto'
      responses:
        '201':
          description: Reservation created successfully
        '400':
          description: Invalid request
      tags: &ref_11
        - reservations
      security: &ref_12
        - bearer: []
  /api/v1/reservations/my:
    get:
      operationId: ReservationsController_getMyReservations
      summary: Get current user reservations
      parameters: []
      responses:
        '200':
          description: Reservations retrieved successfully
      tags: *ref_11
      security: *ref_12
  /api/v1/reservations/my-sales:
    get:
      operationId: ReservationsController_getMySales
      summary: Get reservations for current user products
      parameters: []
      responses:
        '200':
          description: Reservations retrieved successfully
      tags: *ref_11
      security: *ref_12
  /api/v1/reservations/product/{productId}:
    get:
      operationId: ReservationsController_getByProductId
      summary: Get reservations for a product
      parameters:
        - name: productId
          required: true
          in: path
          schema:
            type: string
      responses:
        '200':
          description: Reservations retrieved successfully
      tags: *ref_11
      security: *ref_12
  /api/v1/reservations/{id}:
    get:
      operationId: ReservationsController_findById
      summary: Get reservation by ID
      parameters:
        - name: id
          required: true
          in: path
          schema:
            type: string
      responses:
        '200':
          description: Reservation retrieved successfully
        '404':
          description: Reservation not found
      tags: *ref_11
      security: *ref_12
    put:
      operationId: ReservationsController_update
      summary: Update reservation status
      parameters:
        - name: id
          required: true
          in: path
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateReservationDto'
      responses:
        '200':
          description: Reservation updated successfully
        '403':
          description: Forbidden
        '404':
          description: Reservation not found
      tags: *ref_11
      security: *ref_12
  /api/v1/reservations/test:
    get:
      operationId: ReservationsController_test
      summary: Test endpoint
      parameters: []
      responses:
        '200':
          description: Test successful
      tags: *ref_11
      security: *ref_12
  /api/v1/reports:
    post:
      operationId: ReportsController_create
      summary: Create a new report
      parameters: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateReportDto'
      responses:
        '201':
          description: Report created successfully
        '400':
          description: Invalid request
      tags: &ref_13
        - reports
      security: &ref_14
        - bearer: []
    get:
      operationId: ReportsController_findAll
      summary: Get all reports (Admin only)
      parameters:
        - name: status
          required: true
          in: query
          schema:
            type: string
      responses:
        '200':
          description: Reports retrieved successfully
      tags: *ref_13
      security: *ref_14
  /api/v1/reports/{id}:
    get:
      operationId: ReportsController_findById
      summary: Get report by ID (Admin only)
      parameters:
        - name: id
          required: true
          in: path
          schema:
            type: string
      responses:
        '200':
          description: Report retrieved successfully
        '404':
          description: Report not found
      tags: *ref_13
      security: *ref_14
  /api/v1/reports/{id}/status:
    put:
      operationId: ReportsController_updateStatus
      summary: Update report status (Admin only)
      parameters:
        - name: id
          required: true
          in: path
          schema:
            type: string
      responses:
        '200':
          description: Report status updated successfully
        '403':
          description: Forbidden
      tags: *ref_13
      security: *ref_14
  /api/v1/reports/test:
    get:
      operationId: ReportsController_test
      summary: Test endpoint
      parameters: []
      responses:
        '200':
          description: Test successful
      tags: *ref_13
      security: *ref_14
  /api/v1/notifications:
    get:
      operationId: NotificationsController_getNotifications
      summary: Get user notifications
      parameters:
        - name: isRead
          required: true
          in: query
          schema:
            type: string
      responses:
        '200':
          description: Notifications retrieved successfully
      tags: &ref_15
        - notifications
      security: &ref_16
        - bearer: []
  /api/v1/notifications/unread-count:
    get:
      operationId: NotificationsController_getUnreadCount
      summary: Get unread notification count
      parameters: []
      responses:
        '200':
          description: Unread count retrieved successfully
      tags: *ref_15
      security: *ref_16
  /api/v1/notifications/{id}/read:
    put:
      operationId: NotificationsController_markAsRead
      summary: Mark notification as read
      parameters:
        - name: id
          required: true
          in: path
          schema:
            type: string
      responses:
        '200':
          description: Notification marked as read
        '404':
          description: Notification not found
      tags: *ref_15
      security: *ref_16
  /api/v1/notifications/read-all:
    put:
      operationId: NotificationsController_markAllAsRead
      summary: Mark all notifications as read
      parameters: []
      responses:
        '200':
          description: All notifications marked as read
      tags: *ref_15
      security: *ref_16
  /api/v1/notifications/{id}:
    delete:
      operationId: NotificationsController_delete
      summary: Delete a notification
      parameters:
        - name: id
          required: true
          in: path
          schema:
            type: string
      responses:
        '200':
          description: Notification deleted successfully
        '404':
          description: Notification not found
      tags: *ref_15
      security: *ref_16
  /api/v1/notifications/test:
    get:
      operationId: NotificationsController_test
      summary: Test endpoint
      parameters: []
      responses:
        '200':
          description: Test successful
      tags: *ref_15
      security: *ref_16
  /api/v1/chat:
    post:
      operationId: ChatController_createChat
      summary: Create a new chat
      parameters: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateChatDto'
      responses:
        '201':
          description: Chat created successfully
        '400':
          description: Invalid request
      tags: &ref_17
        - chat
      security: &ref_18
        - bearer: []
    get:
      operationId: ChatController_getUserChats
      summary: Get all user chats
      parameters: []
      responses:
        '200':
          description: Chats retrieved successfully
      tags: *ref_17
      security: *ref_18
  /api/v1/chat/{id}:
    get:
      operationId: ChatController_getChatById
      summary: Get chat by ID with messages
      parameters:
        - name: id
          required: true
          in: path
          schema:
            type: string
      responses:
        '200':
          description: Chat retrieved successfully
        '403':
          description: Forbidden
        '404':
          description: Chat not found
      tags: *ref_17
      security: *ref_18
  /api/v1/chat/{id}/block:
    put:
      operationId: ChatController_blockChat
      summary: Block a chat
      parameters:
        - name: id
          required: true
          in: path
          schema:
            type: string
      responses:
        '200':
          description: Chat blocked successfully
        '403':
          description: Forbidden
      tags: *ref_17
      security: *ref_18
  /api/v1/chat/{id}/unblock:
    put:
      operationId: ChatController_unblockChat
      summary: Unblock a chat
      parameters:
        - name: id
          required: true
          in: path
          schema:
            type: string
      responses:
        '200':
          description: Chat unblocked successfully
        '403':
          description: Forbidden
      tags: *ref_17
      security: *ref_18
  /api/v1/chat/test:
    get:
      operationId: ChatController_test
      summary: Test endpoint
      parameters: []
      responses:
        '200':
          description: Test successful
      tags: *ref_17
      security: *ref_18
info:
  title: memi.az API
  description: Recommerce Platform Backend API
  version: '1.0'
  contact: {}
tags: []
servers: []
components:
  securitySchemes:
    bearer:
      scheme: bearer
      bearerFormat: JWT
      type: http
  schemas:
    RegisterDto:
      type: object
      properties: {}
    LoginDto:
      type: object
      properties: {}
    RefreshTokenDto:
      type: object
      properties: {}
    UpdateProfileDto:
      type: object
      properties: {}
    CreateCategoryDto:
      type: object
      properties: {}
    UpdateCategoryDto:
      type: object
      properties: {}
    CreateSubcategoryDto:
      type: object
      properties: {}
    CreateProductDto:
      type: object
      properties: {}
    UpdateProductDto:
      type: object
      properties: {}
    AddFavoriteDto:
      type: object
      properties: {}
    CreateReservationDto:
      type: object
      properties: {}
    UpdateReservationDto:
      type: object
      properties: {}
    CreateReportDto:
      type: object
      properties: {}
    CreateChatDto:
      type: object
      properties: {}
